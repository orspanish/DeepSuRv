<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Deep Learning CPH Modeling to be Used in Conjunction with Counterfactuals • DeepSuRv</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Deep Learning CPH Modeling to be Used in Conjunction with Counterfactuals">
<meta name="description" content="This is a deep-learning application of the Cox proportional hazards model. It learns model covariates during the training process and does not require them to be specified before the formation of the model, like in traditional Cox regression. This package is meant to be used in conjunction with the `survex` R package to produce counterfactuals for the model outputs.">
<meta property="og:description" content="This is a deep-learning application of the Cox proportional hazards model. It learns model covariates during the training process and does not require them to be specified before the formation of the model, like in traditional Cox regression. This package is meant to be used in conjunction with the `survex` R package to produce counterfactuals for the model outputs.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">DeepSuRv</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/deepsurv_survex.html">Integrating a DeepSuRv Model with survex Counterfactuals</a></li>
    <li><a class="dropdown-item" href="articles/DeepSuRv_tutorial.html">DeepSuRv_tutorial</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/orspanish/DeepSuRv/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="deepsurv">DeepSuRv<a class="anchor" aria-label="anchor" href="#deepsurv"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>DeepSuRv is an R implementation of the DeepSurv feed-forward neural network-based Cox proportional hazards model originally developed in Python using the Theano and Lasagne libraries as the main NN architecture: <a href="https://github.com/jaredleekatzman/DeepSurv.git" class="external-link uri">https://github.com/jaredleekatzman/DeepSurv.git</a></p>
<p>DeepSuRv offers:</p>
<ul>
<li><p>DeepSurv’s neural network survival model in a full native-R implementation backed by the <code>torch</code> R package. <code>torch</code> is R’s open source framework equivalent to Python’s <code>PyTorch</code>.</p></li>
<li><p>Support for flexible network architectures that the user can define (e.g. number of layers, activations, dropout rates, etc.).</p></li>
<li><p>Functions for training, predicting, and evaluating deep survival models.</p></li>
<li><p>Integration with the <code>survex</code> R package to generate counterfactual explanations for individual survival predictions.</p></li>
<li><p>A user-friendly workflow that promotes reproducibility and interpretability.</p></li>
</ul>
<p>DeepSuRv enables researchers to train and interpret neural network survival models through counterfactual reasoning in R.</p>
<div class="section level2">
<h2 id="key-features">Key Features<a class="anchor" aria-label="anchor" href="#key-features"></a>
</h2>
<div class="section level3">
<h3 id="deepsurv-model-in-r">DeepSurv Model in R<a class="anchor" aria-label="anchor" href="#deepsurv-model-in-r"></a>
</h3>
<ul>
<li><p>Feed-forward neural network that produces log-hazard outputs</p></li>
<li><p>Trained using the partial log-likelihood loss of the Cox model</p></li>
<li><p>GPU support via <code>torch</code> when applicable</p></li>
<li><p>Compatibility with tidy data workflows</p></li>
<li><p>Returns concordance index (C-index) and loss during training</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="counterfactual-explanations-with-survex">Counterfactual Explanations with <code>survex</code>
<a class="anchor" aria-label="anchor" href="#counterfactual-explanations-with-survex"></a>
</h3>
<p>DeepSuRv adds new functionality to the original DeepSurv workflow by enabling counterfactual explanations for the neural network model it creates using. <code>survex</code>: <a href="https://github.com/ModelOriented/survex.git" class="external-link uri">https://github.com/ModelOriented/survex.git</a>.</p>
<p><code>survex</code> provides infrastructure for:</p>
<ul>
<li><p>Counterfactual survival curves</p></li>
<li><p>Perturbation-based variable importance</p></li>
<li><p>Model stability checks</p></li>
<li><p>Generation of actionable and human-interpretable explanations</p></li>
</ul>
<p>DeepSuRv’s prediction interface is fully compatible with <code>survex</code>, so users can pass DeepSuRv models directly into the counterfactual functions found in the <code>survex</code> package (more to follow below).</p>
</div>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of DeepSuRv from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"orspanish/DeepSuRv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="descriptions-of-datasets-available-in-the-package">Descriptions of Datasets Available in the Package<a class="anchor" aria-label="anchor" href="#descriptions-of-datasets-available-in-the-package"></a>
</h2>
<ul>
<li><p><strong>German Breast Cancer Study Group (GBSG2):</strong> 686 patients and 8 features (Age, Menopausal status, tumor localization, tumor size, estrogen and progesterone receptor status, tumor grading, histologic tumor type, and number of involved lymph nodes); The endpoint is recurrence free survival, which occurred for 299 patients (43.6%).</p></li>
<li><p><strong>WHAS500 (Worcester Heart Attack Study):</strong> 500 patients and 14 features (AFIB indicator, Age in years at hospital admission, Complete heart block indicator, BMI, Congestive heart complications indicator, History of cardiovascular disease indicator, Initial diastolic blood pressure, Initial systolic blood pressure, gender, Initial heart rate, Length of hospital stay, Acute myocardial infarction (MI) order, MI type, Cardiogenic shock indicator); The endpoint is death, which occurred for 215 patients (43.0%).</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="how-to-train-a-deepsurv-model">How to Train a DeepSurv Model<a class="anchor" aria-label="anchor" href="#how-to-train-a-deepsurv-model"></a>
</h2>
</div>
<div class="section level2">
<h2 id="how-to-produce-a-counterfactual-explanation-with-survex">How to Produce a Counterfactual Explanation with <code>survex</code>
<a class="anchor" aria-label="anchor" href="#how-to-produce-a-counterfactual-explanation-with-survex"></a>
</h2>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Katzman, J. L., Shaham, U., Cloninger, A., Bates, J., Jiang, T., &amp; Kluger, Y. (2018).<br><em>DeepSurv: Personalized Treatment Recommender System Using a Cox Proportional Hazards Deep Neural Network</em>. Proceedings of the Machine Learning for Healthcare Conference, 312–325.<br><a href="https://github.com/jaredleekatzman/DeepSurv" class="external-link uri">https://github.com/jaredleekatzman/DeepSurv</a></p>
<p>Spytek M, Krzyziński M, Langbein SH, Baniecki H, Wright MN, Biecek P. survex: an R package for explaining machine learning survival models. Bioinformatics. 2023 Dec 1;39(12):btad723. doi: 10.1093/bioinformatics/btad723. PMID: 38039146; PMCID: PMC11025379. <a href="https://github.com/ModelOriented/survex/" class="external-link uri">https://github.com/ModelOriented/survex/</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/orspanish/DeepSuRv/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/orspanish/DeepSuRv/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing DeepSuRv</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Olivia Spanish <br><small class="roles"> Author, maintainer </small>   </li>
<li>Keanu Keopimpha <br><small class="roles"> Author </small>   </li>
<li>Maria Murphy <br><small class="roles"> Author </small>   </li>
<li>Yanyi Zhang <br><small class="roles"> Author </small>   </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Olivia Spanish, Keanu Keopimpha, Maria Murphy, Yanyi Zhang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
