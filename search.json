[{"path":"https://orspanish.github.io/DeepSuRv/articles/deepsurv_survex.html","id":"setup","dir":"Articles","previous_headings":"","what":"Setup","title":"Integrating a DeepSuRv Model with survex Counterfactuals","text":"proceeding workflow, users load following libraries: DeepSuRv deep learning modeling torch creating tensor objects support DeepSuRv model survival example datasets survex counterfactual explanation infrastructure","code":""},{"path":"https://orspanish.github.io/DeepSuRv/articles/deepsurv_survex.html","id":"lung-data-from-survival-package","dir":"Articles","previous_headings":"","what":"Lung Data from survival Package","title":"Integrating a DeepSuRv Model with survex Counterfactuals","text":"demonstrate train basic DeepSuRv model create counterfactual explanation using lung dataset survival package.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/articles/deepsurv_survex.html","id":"preparing-the-data","dir":"Articles","previous_headings":"Lung Data from survival Package","what":"Preparing the data","title":"Integrating a DeepSuRv Model with survex Counterfactuals","text":"preprocess data create design matrix using prep_data() ensure status column properly encoded event occurrence (1 event, 0 censoring). step critical incorrect encoding can lead invalid model training.","code":"lung_prep <- prep_data(lung, 'time', 'status') X <- lung_prep$X_mat dat <- lung_prep$dat  #Manual status encoding to ensure correct event assignment dat$status <- ifelse(dat$status == 2, 0, 1)"},{"path":"https://orspanish.github.io/DeepSuRv/articles/deepsurv_survex.html","id":"create-torch-tensors-for-training","dir":"Articles","previous_headings":"Lung Data from survival Package","what":"Create Torch Tensors for Training","title":"Integrating a DeepSuRv Model with survex Counterfactuals","text":"covert data torch tensors, required DeepSuRv model training. DeepSuRv model accepts torch tensors input, skip step! Converting data tensors allows neural network efficiently perform gradient-based optimization. also order data descending survival time maintain consistency standard survival analysis methods.","code":"train_data <- list(   x = torch_tensor(as.matrix(X), dtype = torch_float()),   time = torch_tensor(dat$time, dtype = torch_float()),   event = torch_tensor(dat$status, dtype = torch_float()) )  # Order by descending time order_idx <- order(as.numeric(train_data$time), decreasing = TRUE) train_data$x <- train_data$x[order_idx, ] train_data$time <- train_data$time[order_idx] train_data$event <- train_data$event[order_idx]"},{"path":"https://orspanish.github.io/DeepSuRv/articles/deepsurv_survex.html","id":"initialize-and-standardize-the-model","dir":"Articles","previous_headings":"Lung Data from survival Package","what":"Initialize and Standardize the Model","title":"Integrating a DeepSuRv Model with survex Counterfactuals","text":"define basic standardized model one hidden layer. Standardization necessary default option repository original Python implementation. Standardization ensures input features scale, helps neural network converge efficiently prevents certain features dominating learning process.","code":"model <- DeepSuRv$new(   n_in = ncol(X),   hidden_layers = c(16),   dropout = 0,   learning_rate = 0.01 )  model$set_standardization(X)"},{"path":"https://orspanish.github.io/DeepSuRv/articles/deepsurv_survex.html","id":"train-the-model","dir":"Articles","previous_headings":"Lung Data from survival Package","what":"Train the Model","title":"Integrating a DeepSuRv Model with survex Counterfactuals","text":"now train model using prepared tensors. training, network learns relationship input features survival outcomes. model training INSERT NAME DEEPSURV CLASS TUTORIAL ARTICLE.","code":"model$train(   X_train = train_data$x,   t_train = train_data$time,   e_train = train_data$event ) #> Epoch: 10 Loss: 191.5786  #> Epoch: 20 Loss: 188.6638  #> Epoch: 30 Loss: 185.7837  #> Epoch: 40 Loss: 182.8854  #> Epoch: 50 Loss: 180.3779"},{"path":"https://orspanish.github.io/DeepSuRv/articles/deepsurv_survex.html","id":"make-predictions","dir":"Articles","previous_headings":"Lung Data from survival Package","what":"Make Predictions","title":"Integrating a DeepSuRv Model with survex Counterfactuals","text":"training, can predict risk scores patient. risk scores indicate relative hazard, higher scores corresponding higher risk event interest occurring sooner.","code":"risk_scores <- model$predict_risk(X) head(risk_scores) #> [1] -0.5356189  0.7908125 -1.9209992  1.2045156  0.5373293  0.2379999"},{"path":"https://orspanish.github.io/DeepSuRv/articles/deepsurv_survex.html","id":"creating-an-explainer","dir":"Articles","previous_headings":"","what":"Creating an Explainer","title":"Integrating a DeepSuRv Model with survex Counterfactuals","text":"interpret model, use survex create explainer object. step allows us understand contribution feature predicted risk sets counterfactual analysis follows.","code":"explainer <- make_deepsurv_explainer(model, dat, 'time', 'status') #> Preparation of a new explainer is initiated  #>   -> model label       :  R6 (  default  )  #>   -> data              :  167  rows  8  cols  #>   -> target variable   :  167  values ( 47 events and 120 censored )  #>   -> times             :  45 unique time points , min = 105 , max = 1022  #>   -> predict function  :  predict_fun  #>   -> predict survival function  :  predict_survival_fun  #>   -> predict cumulative hazard function  :  -log(predict_survival_function) will be used (  default  )  #>   -> model_info        :  package unrecognized , model of class: DeepSuRv , ver. unknown , task survival (  default  )  #>   -> model_info        :  type set to  risk  #>   A new explainer has been created!"},{"path":"https://orspanish.github.io/DeepSuRv/articles/deepsurv_survex.html","id":"model-profiling","dir":"Articles","previous_headings":"Creating an Explainer","what":"Model Profiling","title":"Integrating a DeepSuRv Model with survex Counterfactuals","text":"can examine specific variables influence survival survex. provides insight features important model’s predictions. survex::model_profile() generates three main outputs. $eval_times lists time points survival predictions evaluated . cp_profiles shows modified covariate values used scenario selected variables (age sex) varied variables held fixed. profiled predictions table links scenarios predicted survival probabilities time, columns _times_ time point, _yhat_ predicted survival, _vname_ indicating variable varied. Interpreting output allows see individual variables influence survival predictions time. output features dependent upon function arguments user specifies. hidden output due large size.","code":"model_profile(explainer, output_type = \"survival\", variables = c(\"age\", \"sex\")))"},{"path":"https://orspanish.github.io/DeepSuRv/articles/deepsurv_survex.html","id":"feature-importance-plot","dir":"Articles","previous_headings":"Creating an Explainer","what":"Feature Importance Plot","title":"Integrating a DeepSuRv Model with survex Counterfactuals","text":"survex::model_parts() computes permutation-based variable importance survival models. Given survival model wrapped explainer object, measures much feature contributes model’s predictive performance randomly permuting feature comparing resulting predictions baseline. Features cause large drop performance permuted deemed important. function works full survival predictions uses loss function (default Brier score) quantify performance changes. Brier score scoring rule ranging 0 (perfect accuracy) 1 (perfect inaccuracy) measures accuracy predicted survival function. output can inspected table visualized plot(), providing global view variables influence model’s survival predictions. seen plot , ph.karno variable important covariate (according Brier score metric) creating model’s predictions. Visualizing variable importance helps communicate factors model relies . previously weakness neural network models, often praised efficiency obtaining results concerning weakness interpretability. combining DeepSuRv’s predictive efficiency explanatory power survex, can now gain understanding going hood black box models like feed- forward neural networks.","code":"plot(model_parts(explainer))"},{"path":"https://orspanish.github.io/DeepSuRv/articles/deepsurv_survex.html","id":"model-performance","dir":"Articles","previous_headings":"Creating an Explainer","what":"Model Performance","title":"Integrating a DeepSuRv Model with survex Counterfactuals","text":"survex::model_performance() evaluates well survival model predicts outcomes computing set standard performance metrics tailored survival analysis (argument type = \"metrics\" specified; default). Given explainer object, calculates measures Harrell’s concordance index (C-index), time‑dependent C/D AUC, Brier score, integrated (overall) versions, quantify different aspects prediction quality time. can also produce ROC curves specified time points requested (argument (type = \"roc\" specified). metrics help assess compare predictive ability survival models meaningful way, going beyond simple single summary account time‑‑event structure censoring data. using plot() returned object users can visualize model performs across time compare models graphically.","code":"deepsurv_mp <- model_performance(explainer, type = \"roc\", times = c(200, 400, 600)) plot(deepsurv_mp)"},{"path":"https://orspanish.github.io/DeepSuRv/articles/deepsurv_survex.html","id":"model-diagnostics","dir":"Articles","previous_headings":"Creating an Explainer","what":"Model Diagnostics","title":"Integrating a DeepSuRv Model with survex Counterfactuals","text":"survex::model_diagnostics() provides diagnostic checks survival models computing standard residuals help users evaluate well model fits data. users pass explainer object function, calculates residuals martingale residuals deviance residuals, summarize differences observed outcomes model predictions. example, residuals can describe whether events occurred earlier later expected model. residuals can reveal systematic patterns lack fit (e.g., model misspecification, nonlinearity, influential observations), supports model assessment addition overall performance metrics like C-indices Brier scores. output can examined numerically visualized (e.g., plotting residuals covariates cumulative hazard) help diagnose issues guide model improvement. hidden residual dataframe output due large size.","code":"res <- model_diagnostics(explainer) plot(res, plot_type = \"martingale\") plot(res, xvariable = \"age\") #> `geom_smooth()` using method = 'loess' and formula = 'y ~ x'"},{"path":"https://orspanish.github.io/DeepSuRv/articles/deepsurv_survex.html","id":"general-note","dir":"Articles","previous_headings":"","what":"General Note","title":"Integrating a DeepSuRv Model with survex Counterfactuals","text":"users create explainer object survex, can use explainer object input survex function. explainer object essentially user makes DeepSuRv model interpretable survex package. Skipping step prevent users accessing counterfactual functionality DeepSuRv implementation offers. additional information full suite survex’s counterfactual explanations, please refer GitHub pages site.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Olivia Spanish. Author, maintainer. Keanu Keopimpha. Author. Maria Murphy. Author. Yanyi Zhang. Author.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Spanish O, Keopimpha K, Murphy M, Zhang Y (2025). DeepSuRv: Deep Learning CPH Modeling Used Conjunction Counterfactuals. R package version 0.0.0.9000, https://github.com/orspanish/DeepSuRv.","code":"@Manual{,   title = {DeepSuRv: Deep Learning CPH Modeling to be Used in Conjunction with Counterfactuals},   author = {Olivia Spanish and Keanu Keopimpha and Maria Murphy and Yanyi Zhang},   year = {2025},   note = {R package version 0.0.0.9000},   url = {https://github.com/orspanish/DeepSuRv}, }"},{"path":"https://orspanish.github.io/DeepSuRv/index.html","id":"deepsurv","dir":"","previous_headings":"","what":"Deep Learning CPH Modeling to be Used in Conjunction with Counterfactuals","title":"Deep Learning CPH Modeling to be Used in Conjunction with Counterfactuals","text":"DeepSuRv R implementation DeepSurv feed-forward neural network-based Cox proportional hazards model originally developed Python using Theano Lasagne libraries main NN architecture: https://github.com/jaredleekatzman/DeepSurv.git DeepSuRv offers: DeepSurv’s neural network survival model full native-R implementation backed torch R package. torch R’s open source framework equivalent Python’s PyTorch. Support flexible network architectures user can define (e.g. number layers, activations, dropout rates, etc.). Functions training, predicting, evaluating deep survival models. Integration survex R package generate counterfactual explanations individual survival predictions. user-friendly workflow promotes reproducibility interpretability. DeepSuRv enables researchers train interpret neural network survival models counterfactual reasoning R.","code":""},{"path":[]},{"path":"https://orspanish.github.io/DeepSuRv/index.html","id":"deepsurv-model-in-r","dir":"","previous_headings":"Key Features","what":"DeepSurv Model in R","title":"Deep Learning CPH Modeling to be Used in Conjunction with Counterfactuals","text":"Feed-forward neural network produces log-hazard outputs Trained using partial log-likelihood loss Cox model GPU support via torch applicable Compatibility tidy data workflows Returns concordance index (C-index) loss training","code":""},{"path":"https://orspanish.github.io/DeepSuRv/index.html","id":"counterfactual-explanations-with-survex","dir":"","previous_headings":"Key Features","what":"Counterfactual Explanations with survex","title":"Deep Learning CPH Modeling to be Used in Conjunction with Counterfactuals","text":"DeepSuRv adds new functionality original DeepSurv workflow enabling counterfactual explanations neural network model creates using. survex: https://github.com/ModelOriented/survex.git. survex provides infrastructure : Counterfactual survival curves Perturbation-based variable importance Model stability checks Generation actionable human-interpretable explanations DeepSuRv’s prediction interface fully compatible survex, users can pass DeepSuRv models directly counterfactual functions found survex package (follow ).","code":""},{"path":"https://orspanish.github.io/DeepSuRv/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Deep Learning CPH Modeling to be Used in Conjunction with Counterfactuals","text":"can install development version DeepSuRv GitHub :","code":"# install.packages(\"devtools\") devtools::install_github(\"orspanish/DeepSuRv\")"},{"path":"https://orspanish.github.io/DeepSuRv/index.html","id":"descriptions-of-datasets-available-in-the-package","dir":"","previous_headings":"","what":"Descriptions of Datasets Available in the Package","title":"Deep Learning CPH Modeling to be Used in Conjunction with Counterfactuals","text":"German Breast Cancer Study Group (GBSG2): 686 patients 8 features (Age, Menopausal status, tumor localization, tumor size, estrogen progesterone receptor status, tumor grading, histologic tumor type, number involved lymph nodes); endpoint recurrence free survival, occurred 299 patients (43.6%). WHAS500 (Worcester Heart Attack Study): 500 patients 14 features (AFIB indicator, Age years hospital admission, Complete heart block indicator, BMI, Congestive heart complications indicator, History cardiovascular disease indicator, Initial diastolic blood pressure, Initial systolic blood pressure, gender, Initial heart rate, Length hospital stay, Acute myocardial infarction (MI) order, MI type, Cardiogenic shock indicator); endpoint death, occurred 215 patients (43.0%).","code":""},{"path":[]},{"path":[]},{"path":"https://orspanish.github.io/DeepSuRv/index.html","id":"references","dir":"","previous_headings":"","what":"References","title":"Deep Learning CPH Modeling to be Used in Conjunction with Counterfactuals","text":"Katzman, J. L., Shaham, U., Cloninger, ., Bates, J., Jiang, T., & Kluger, Y. (2018).DeepSurv: Personalized Treatment Recommender System Using Cox Proportional Hazards Deep Neural Network. Proceedings Machine Learning Healthcare Conference, 312–325.https://github.com/jaredleekatzman/DeepSurv Spytek M, Krzyziński M, Langbein SH, Baniecki H, Wright MN, Biecek P. survex: R package explaining machine learning survival models. Bioinformatics. 2023 Dec 1;39(12):btad723. doi: 10.1093/bioinformatics/btad723. PMID: 38039146; PMCID: PMC11025379. https://github.com/ModelOriented/survex/","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":null,"dir":"Reference","previous_headings":"","what":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"DeepSuRv Neural Network Model (R6 Class) DeepSuRv Neural Network Model (R6 Class)","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"fully constructed DeepSuRv R6 object","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"R6-based DeepSurv neural network survival analysis using torch. Supports feature standardization, training, risk prediction, bootstrap C-index evaluation.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"public-fields","dir":"Reference","previous_headings":"","what":"Public fields","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"model underlying nn_module representing neural network. n_in Number input features. hidden_layers Integer vector specifying hidden layer sizes. dropout Dropout probability applied hidden layers. learning_rate Learning rate Adam optimizer. n_epochs Number epochs used training. mu Column means used feature standardization. sigma Column standard deviations used feature standardization.","code":""},{"path":[]},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"DeepSuRv$new() DeepSuRv$set_standardization() DeepSuRv$standardize() DeepSuRv$nll_loss() DeepSuRv$train() DeepSuRv$predict_risk() DeepSuRv$bootstrap_cindex() DeepSuRv$clone()","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"Initialize DeepSuRv object","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"","code":"DeepSuRv$new(   n_in,   hidden_layers = c(),   dropout = 0,   learning_rate = 0.01,   n_epochs = 50 )"},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"n_in Number input features. hidden_layers Integer vector specifying hidden layer sizes. dropout Dropout probability. learning_rate Learning rate Adam optimizer. n_epochs Number epochs.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"returns","dir":"Reference","previous_headings":"","what":"Returns","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"DeepSuRv object","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"method-set-standardization-","dir":"Reference","previous_headings":"","what":"Method set_standardization()","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"Compute store column means standard deviations features.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"","code":"DeepSuRv$set_standardization(X)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"X Feature matrix (numeric matrix data.frame).","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"method-standardize-","dir":"Reference","previous_headings":"","what":"Method standardize()","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"Standardize feature matrix using stored mean SD.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"","code":"DeepSuRv$standardize(X)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"X Feature matrix standardize.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"returns-1","dir":"Reference","previous_headings":"","what":"Returns","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"Standardized feature matrix.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"method-nll-loss-","dir":"Reference","previous_headings":"","what":"Method nll_loss()","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"Compute negative log partial likelihood (Cox model loss).","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"","code":"DeepSuRv$nll_loss(pred, t, e)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"pred Tensor predicted risk scores. t Tensor event/censoring times. e Tensor event indicators (1 = event, 0 = censored).","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"returns-2","dir":"Reference","previous_headings":"","what":"Returns","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"Negative log partial likelihood (torch tensor).","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"method-train-","dir":"Reference","previous_headings":"","what":"Method train()","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"Train DeepSuRv model.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"","code":"DeepSuRv$train(X_train, t_train, e_train, verbose = TRUE)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"X_train Training feature matrix. t_train Event/censoring times. e_train Event indicator vector. verbose Logical; print loss updates every 10 epochs.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"method-predict-risk-","dir":"Reference","previous_headings":"","what":"Method predict_risk()","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"Predict risk scores new data.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"","code":"DeepSuRv$predict_risk(X)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"X Feature matrix.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"returns-3","dir":"Reference","previous_headings":"","what":"Returns","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"Numeric vector predicted risk scores.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"method-bootstrap-cindex-","dir":"Reference","previous_headings":"","what":"Method bootstrap_cindex()","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"Compute bootstrap C-index confidence intervals.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"","code":"DeepSuRv$bootstrap_cindex(X, t, e, n_boot = 500, seed = 42)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"arguments-6","dir":"Reference","previous_headings":"","what":"Arguments","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"X Feature matrix. t Event/censoring times. e Event indicator vector. n_boot Number bootstrap iterations (default 500). seed Random seed (default 42).","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"returns-4","dir":"Reference","previous_headings":"","what":"Returns","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"List cindex, lower, upper.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"objects class cloneable method.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"usage-7","dir":"Reference","previous_headings":"","what":"Usage","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"","code":"DeepSuRv$clone(deep = FALSE)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/DeepSuRv.html","id":"arguments-7","dir":"Reference","previous_headings":"","what":"Arguments","title":"DeepSuRv Neural Network Model (R6 Class) — DeepSuRv","text":"deep Whether make deep clone.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_apply_constraints.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply biological constraints to feature values — cf_apply_constraints","title":"Apply biological constraints to feature values — cf_apply_constraints","text":"Ensures feature values remain within user-defined min/max ranges maintain biological plausibility.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_apply_constraints.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply biological constraints to feature values — cf_apply_constraints","text":"","code":"cf_apply_constraints(x_row, constraints = NULL)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_apply_constraints.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply biological constraints to feature values — cf_apply_constraints","text":"x_row one-row data frame covariates. constraints named list, element list possibly containing min /max values (e.g.list(age = list(min = 0, max = 120))).","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_apply_constraints.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply biological constraints to feature values — cf_apply_constraints","text":"constrained data frame adjusted feature values.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_apply_constraints.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply biological constraints to feature values — cf_apply_constraints","text":"","code":"# cf_apply_constraints(patient, list(age = list(min = 0, max = 100)))"},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_compare_one.html","id":null,"dir":"Reference","previous_headings":"","what":"Compare original and counterfactual survival for one feature — cf_compare_one","title":"Compare original and counterfactual survival for one feature — cf_compare_one","text":"Generates counterfactual scenario modifying single feature (e.g., -10%) recomputing survival curve risk score.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_compare_one.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compare original and counterfactual survival for one feature — cf_compare_one","text":"","code":"cf_compare_one(expl, x_row, feature, change = -0.1)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_compare_one.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compare original and counterfactual survival for one feature — cf_compare_one","text":"expl Survex explainer object. x_row one-row data frame covariates. feature Character; feature name modify. change Numeric; relative change (e.g., -0.10 = -10%).","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_compare_one.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compare original and counterfactual survival for one feature — cf_compare_one","text":"list containing: times Vector time points. S_orig Original survival curve. S_cf Counterfactual survival curve. risk_orig Original risk score. risk_cf Counterfactual risk score. x_cf Modified data frame change.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_compare_one.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compare original and counterfactual survival for one feature — cf_compare_one","text":"","code":"# cf_compare_one(expl, patient_data[1, ], \"cholesterol\", change = -0.1)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_generate_curves.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate counterfactual survival curves for multiple scenarios — cf_generate_curves","title":"Generate counterfactual survival curves for multiple scenarios — cf_generate_curves","text":"Compute survival curves risk scores multiple counterfactual scenarios. scenario represents set feature perturbations.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_generate_curves.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate counterfactual survival curves for multiple scenarios — cf_generate_curves","text":"","code":"cf_generate_curves(expl, x_row, change_list, constraints = NULL)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_generate_curves.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate counterfactual survival curves for multiple scenarios — cf_generate_curves","text":"expl Survex explainer object created make_deepsurv_explainer(). x_row one-row data frame covariates representing single individual. change_list named list, element named numeric vector relative changes selected features (e.g., list(age = -0.1, bmi = 0.05)). constraints Optional named list specifying min/max bounds, passed cf_apply_constraints().","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_generate_curves.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate counterfactual survival curves for multiple scenarios — cf_generate_curves","text":"named list element contains: times Vector time points used survival curves. S_orig Original survival curve. S_cf Counterfactual survival curve. risk_orig Original risk score. risk_cf Counterfactual risk score. x_cf Modified covariate data perturbation.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_generate_curves.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate counterfactual survival curves for multiple scenarios — cf_generate_curves","text":"","code":"# cf_generate_curves(expl, patient[1, ], #   list(low_bp = c(bp = -0.2), high_bmi = c(bmi = 0.1)))"},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_perturb_multi.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply multi-feature relative perturbations — cf_perturb_multi","title":"Apply multi-feature relative perturbations — cf_perturb_multi","text":"Modifies multiple features given relative changes (e.g., +0.1 = +10%) reapplies constraints.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_perturb_multi.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply multi-feature relative perturbations — cf_perturb_multi","text":"","code":"cf_perturb_multi(x_row, changes, constraints = NULL)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_perturb_multi.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply multi-feature relative perturbations — cf_perturb_multi","text":"x_row one-row data frame covariates. changes named numeric vector relative changes (e.g., c(age = -0.1, cholesterol = -0.2)). constraints Optional constraints list passed cf_apply_constraints().","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_perturb_multi.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply multi-feature relative perturbations — cf_perturb_multi","text":"modified data frame updated feature values.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_perturb_multi.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply multi-feature relative perturbations — cf_perturb_multi","text":"","code":"# cf_perturb_multi(patient, c(age = -0.1, bmi = 0.05))"},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot original vs. counterfactual survival curves — cf_plot","title":"Plot original vs. counterfactual survival curves — cf_plot","text":"Simple visualization comparing original counterfactual survival curves.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot original vs. counterfactual survival curves — cf_plot","text":"","code":"cf_plot(cf_out, main = \"Counterfactual\")"},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot original vs. counterfactual survival curves — cf_plot","text":"cf_out list returned cf_compare_one(). main Character; plot title.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot original vs. counterfactual survival curves — cf_plot","text":"base R plot displaying survival curves.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_plot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot original vs. counterfactual survival curves — cf_plot","text":"","code":"# cf_plot(cf_result)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_stability.html","id":null,"dir":"Reference","previous_headings":"","what":"Assess stability of counterfactual predictions — cf_stability","title":"Assess stability of counterfactual predictions — cf_stability","text":"Evaluates sensitive model risk predictions small random perturbations. Jitter around base change report risk mean/sd","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_stability.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Assess stability of counterfactual predictions — cf_stability","text":"","code":"cf_stability(expl, x_row, base_change, n = 10, jitter = 0.02, seed = 1)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_stability.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Assess stability of counterfactual predictions — cf_stability","text":"expl Survex explainer object. x_row one-row data frame covariates. base_change named numeric vector base relative changes. n Integer; number random samples (default = 10). jitter Numeric; maximum random deviation added change (default = 0.02). seed Integer; random seed reproducibility (default = 1).","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_stability.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Assess stability of counterfactual predictions — cf_stability","text":"named numeric vector mean standard deviation predicted risks jittered perturbations.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_stability.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Assess stability of counterfactual predictions — cf_stability","text":"","code":"# cf_stability(expl, patient[1, ], c(bmi = 0.05))"},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_top_features.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify top influential features for an individual prediction — cf_top_features","title":"Identify top influential features for an individual prediction — cf_top_features","text":"Perturbs feature slightly measures change predicted risk. Ranks features absolute effect output.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_top_features.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify top influential features for an individual prediction — cf_top_features","text":"","code":"cf_top_features(expl, x_row, k = 3, eps = 0.05)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_top_features.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify top influential features for an individual prediction — cf_top_features","text":"expl Survex explainer object created make_deepsurv_explainer(). x_row one-row data frame representing single individual. k Integer; number top features return (default = 3). eps Numeric; small relative change applied feature (default = 0.05).","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_top_features.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify top influential features for an individual prediction — cf_top_features","text":"data frame containing top influential features absolute risk changes.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/cf_top_features.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify top influential features for an individual prediction — cf_top_features","text":"","code":"# cf_top_features(expl, patient_data[1, ])"},{"path":"https://orspanish.github.io/DeepSuRv/reference/format_dataset_to_df.html","id":null,"dir":"Reference","previous_headings":"","what":"Format a DeepSurv Dataset into a Data Frame — format_dataset_to_df","title":"Format a DeepSurv Dataset into a Data Frame — format_dataset_to_df","text":"Converts dataset list containing x, t, e components single data frame covariates, duration, event indicator columns. Optionally renames treatment column.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/format_dataset_to_df.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format a DeepSurv Dataset into a Data Frame — format_dataset_to_df","text":"","code":"format_dataset_to_df(dataset, duration_col, event_col, trt_idx = NULL)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/format_dataset_to_df.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format a DeepSurv Dataset into a Data Frame — format_dataset_to_df","text":"dataset list containing matrices x, t, e. duration_col Integer; column index duration variable dataset$t. event_col Integer; column index event indicator dataset$e. trt_idx Optional integer index dataset$x renamed \"treat\".","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/format_dataset_to_df.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format a DeepSurv Dataset into a Data Frame — format_dataset_to_df","text":"data frame containing covariates plus dt (duration) censor (event indicator).","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/get_optimizer_from_str.html","id":null,"dir":"Reference","previous_headings":"","what":"Map string to torch optimizer function — get_optimizer_from_str","title":"Map string to torch optimizer function — get_optimizer_from_str","text":"Returns corresponding torch optimizer class given string.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/get_optimizer_from_str.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Map string to torch optimizer function — get_optimizer_from_str","text":"","code":"get_optimizer_from_str(opt)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/get_optimizer_from_str.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Map string to torch optimizer function — get_optimizer_from_str","text":"opt Character. One \"sgd\", \"adam\", \"rmsprop\".","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/get_optimizer_from_str.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Map string to torch optimizer function — get_optimizer_from_str","text":"function NULL string unrecognized.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/load_datasets.html","id":null,"dir":"Reference","previous_headings":"","what":"Load HDF5 Datasets into R — load_datasets","title":"Load HDF5 Datasets into R — load_datasets","text":"Internal helper function reads DeepSurv-style HDF5 file containing groups \"train\", \"valid\", \"test\". group expected contain datasets \"x\", \"t\", \"e\".","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/load_datasets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load HDF5 Datasets into R — load_datasets","text":"","code":"load_datasets(dataset_file)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/load_datasets.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load HDF5 Datasets into R — load_datasets","text":"dataset_file Path HDF5 dataset file.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/load_datasets.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load HDF5 Datasets into R — load_datasets","text":"named list element corresponds dataset group, group contains named arrays read HDF5 file.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/load_datasets.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Load HDF5 Datasets into R — load_datasets","text":"Uses hdf5r::H5File open file read-mode. Reads dataset fully memory using []-operator.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/make_deepsurv_explainer.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a survex explainer object for a trained DeepSuRv model — make_deepsurv_explainer","title":"Create a survex explainer object for a trained DeepSuRv model — make_deepsurv_explainer","text":"Create survex explainer object trained DeepSuRv model","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/make_deepsurv_explainer.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a survex explainer object for a trained DeepSuRv model — make_deepsurv_explainer","text":"","code":"make_deepsurv_explainer(model, data, time_col, event_col)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/make_deepsurv_explainer.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a survex explainer object for a trained DeepSuRv model — make_deepsurv_explainer","text":"model trained DeepSuRv model. data data.frame containing covariates + survival columns. time_col Name survival time variable. event_col Name event indicator (1 = event).","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/make_deepsurv_explainer.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a survex explainer object for a trained DeepSuRv model — make_deepsurv_explainer","text":"survex explainer object.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/negative_log_likelihood.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Negative Log-Likelihood — negative_log_likelihood","title":"Compute Negative Log-Likelihood — negative_log_likelihood","text":"Compute Negative Log-Likelihood","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/negative_log_likelihood.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Negative Log-Likelihood — negative_log_likelihood","text":"","code":"negative_log_likelihood(model, X, E)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/negative_log_likelihood.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Negative Log-Likelihood — negative_log_likelihood","text":"E numeric vector event indicators (1 = event occurred, 0 = censored). self model-like object containing method returns predicted log hazard. deterministic Logical; TRUE, calculates deterministic network outputs.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/negative_log_likelihood.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Negative Log-Likelihood — negative_log_likelihood","text":"single numeric value representing negative partial log-likelihood.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/negative_log_likelihood.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute Negative Log-Likelihood — negative_log_likelihood","text":"","code":"fake_self <- list(risk = function(deterministic) c(0.1, 0.2, 0.3)) E <- c(1, 0, 1) negative_log_likelihood(fake_self, E) #> Error in model$risk(torch_tensor(as.matrix(X), dtype = torch_float()))$squeeze: $ operator is invalid for atomic vectors"},{"path":"https://orspanish.github.io/DeepSuRv/reference/prep_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare data for DeepSurv training — prep_data","title":"Prepare data for DeepSurv training — prep_data","text":"function preprocesses dataset use DeepSurv. removes incomplete cases, scales numeric variables, converts character/factor variables numeric encodings, constructs training data torch tensors, orders observations decreasing survival time.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/prep_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare data for DeepSurv training — prep_data","text":"","code":"prep_data(data, time_col, event_col)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/prep_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare data for DeepSurv training — prep_data","text":"data data.frame containing covariates survival outcome variables. time_col string giving name survival time column. event_col string giving name event indicator column (typically 1 = event, 0 = censored).","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/prep_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare data for DeepSurv training — prep_data","text":"list containing: X_mat processed version covariate matrix numeric scaling factor/character conversion applied. dat matrix processed covariate data addition time event data.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/prep_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prepare data for DeepSurv training — prep_data","text":"","code":"if (FALSE) { # \\dontrun{ train_obj <- prep_data(mydata, time_col = \"time\", event_col = \"status\") } # }"},{"path":"https://orspanish.github.io/DeepSuRv/reference/prepare_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare Dataset for Survival Analysis — prepare_data","title":"Prepare Dataset for Survival Analysis — prepare_data","text":"function prepares dataset survival modeling optionally standardizing covariates sorting data survival time descending order. useful preprocessing fitting models Cox proportional hazards DeepSurv.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/prepare_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare Dataset for Survival Analysis — prepare_data","text":"","code":"prepare_data(dataset, standardize = TRUE, offset = NULL, scale = NULL)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/prepare_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare Dataset for Survival Analysis — prepare_data","text":"dataset list containing survival data elements: x numeric matrix data frame covariates (predictors). e numeric integer vector event indicators (1 = event, 0 = censored). t numeric vector survival times. standardize Logical; TRUE (default), covariates x standardized. offset Optional numeric vector giving means covariates used standardization. NULL, computed x. scale Optional numeric vector giving standard deviations covariates used standardization. NULL, computed x.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/prepare_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare Dataset for Survival Analysis — prepare_data","text":"list following elements: x (optionally) standardized sorted covariate matrix. e sorted event indicator vector. t sorted survival times. offset mean values used standardization. scale standard deviations used standardization.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/prepare_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prepare Dataset for Survival Analysis — prepare_data","text":"standardize = TRUE, function calls standardize_x() center scale column x. function sorts observations survival time (t) decreasing order ensure correct ordering likelihood-based methods.","code":""},{"path":[]},{"path":"https://orspanish.github.io/DeepSuRv/reference/prepare_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prepare Dataset for Survival Analysis — prepare_data","text":"","code":"dataset <- list(   x = matrix(rnorm(20), ncol = 2),   e = c(1, 0, 1, 1, 0, 1, 0, 0, 1, 1),   t = runif(10, 1, 10) ) result <- prepare_data(dataset) str(result) #> List of 5 #>  $ x     : num [1:10, 1:2] -0.292 -0.319 0.588 1.908 0.614 ... #>  $ e     : num [1:10] 0 1 0 1 1 0 1 1 0 1 #>  $ t     : num [1:10] 9.53 8.43 6.37 6.13 5.9 ... #>  $ offset: num [1:2] -0.179 -0.124 #>  $ scale : num [1:2] 1.18 1.05"},{"path":"https://orspanish.github.io/DeepSuRv/reference/standardize_x.html","id":null,"dir":"Reference","previous_headings":"","what":"Standardize a Covariate Matrix — standardize_x","title":"Standardize a Covariate Matrix — standardize_x","text":"Internal helper function centers scales column matrix. offset (column means) scale (column SDs) provided, computed data.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/standardize_x.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Standardize a Covariate Matrix — standardize_x","text":"","code":"standardize_x(x, offset = NULL, scale = NULL)"},{"path":"https://orspanish.github.io/DeepSuRv/reference/standardize_x.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Standardize a Covariate Matrix — standardize_x","text":"x numeric matrix covariates. offset Optional numeric vector column means subtract. NULL, column means computed x. scale Optional numeric vector column standard deviations divide . NULL, column SDs computed x. zero SD replaced 1 avoid division--zero.","code":""},{"path":"https://orspanish.github.io/DeepSuRv/reference/standardize_x.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Standardize a Covariate Matrix — standardize_x","text":"list components: x standardized matrix. offset column means used centering. scale column SDs used scaling.","code":""}]
